
**Подключение raspbery pico к принтеру**

Основным препятствием в ваших самоделках может быть отсутствие свободных пинов на материнской плате принтера, данный мануал даст вам возможность добавить их некоторое количество с помощью подключения дополнительного mcu основанного на Raspbery pico.

1. вскрываем днище нашего корпуса принтера.

![](/bottom1.jpg)

2. находим свободный юсб разъем на плате

![](plate.jpg)

3. обжимаем разьем из любого подходящего микро юсб кабеля.

![](view1.jpg)

4. Теперь нам нужно прошить нашу pico на самом принтере это сделать проблематично поэтому есть несколько вариантов поставить klipper на другую подходящую железку и  в меню выбрать:

![](pico_flash.jpg)

ну или не мучаться и скачать готовую прошивку [**тут**](klipper.zip)

5. прошиваем

6. подключаем к разьему.

На одноплатнике выполняем:

```
ls /dev/serial/by-path/* (также можно использовать /dev/serial/by-id/)
```

должны увидеть что-то типа такого:

```
 /dev/serial/by-id/usb-Klipper_rp2040_E660B4404B3EAB35-if00
```

если не увидели то возможные варианты:

 - плохой кабель
 
 - неправильно сделан разьем.


7. в нашем printer.cfg добавляем строки:


```
[mcu pico]
serial: /dev/serial/by-id/usb-Klipper_rp2040_E660B4404B3EAB35-if00
```
где после `serial:` идет та  строка что мы получили в предыдущем пункте.

теперь у нас все готово для добавления наших пинов в наши проекты. 

например конфиг для датчика толщины филамента будет выглядеть так:

```
[hall_filament_width_sensor]
adc1: pico:gpio26
adc2: pico:gpio27
cal_dia1: 1.48
cal_dia2: 1.99
raw_dia1: 8750
raw_dia2: 9175
default_nominal_filament_diameter: 1.75
max_difference: 0.150
measurement_delay: 665
enable: True
logging: True
measurement_interval: 5
```