[‚Ü©Ô∏è –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é](../readme.md)

---

# ‚è∞ –¢–∞–π–º–µ—Ä –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –ø–µ—á–∞—Ç–∏

> –ß–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π, –æ–¥–Ω–∞–∫–æ –ø–æ–∫–∞ –µ–≥–æ –¥–µ–ª–∞–ª –Ω–∞—à–µ–ª –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–π–ª–∏–∫ –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Ç–æ–º —Å—Ç–∞–ª —á–∞—Å—Ç—å—é Helper Script

<h3 align="right"><a href="https://www.tinkoff.ru/rm/yakovleva.irina203/51ZSr71845" target="_blank">üíù –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ—Ä–∞</a></h3>

---

## üí° –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º –≤—Ä–µ–º—è –≤–µ—á–µ—Ä, –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è –ø–æ—É—Ç—Ä—É –ª–µ–Ω—å, –Ω–µ–∫–æ–≥–¥–∞, –∏–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö–æ—á—É —á—Ç–æ–± –ø—Ä–∏–Ω—Ç–µ—Ä –Ω–∞—á–∞–ª –ø–µ—á–∞—Ç–∞—Ç—å –≤ —Ç—Ä–∏ –Ω–æ—á–∏ —á—Ç–æ–± –∫ —É—Ç—Ä—É –∑–∞–º–µ–Ω–∏—Ç—å —Ñ–∏–ª–∞–º–µ–Ω—Ç –∏ –∫ –æ–±–µ–¥—É —Ä–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å... —Ç–∞–∫ –≤–æ—Ç, **–Ω–µ—Ç —É –Ω–µ–≥–æ —Ç–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —á—Ç–æ–± –ø–æ –±—É–¥–∏–ª—å–Ω–∏–∫—É –ø–µ—á–∞—Ç–∞—Ç—å**. 

–ú–æ–∂–Ω–æ –∫–æ–Ω–µ—á–Ω–æ —á–µ—Ä–µ–∑ HOME ASSISTANT –∏ –ø—Ä–æ—á–∏–µ —É–º–Ω—ã–µ –¥–æ–º–∏–∫–∏, –Ω–æ —ç—Ç–æ –≤—Ä–æ–¥–µ –∫–∞–∫ –Ω–µ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ... üèÉ

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ!** –¢–∞–∫ –∫–∞–∫ –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Helper Script —É–∂–µ —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –µ—Å—Ç—å, —Ç–æ **–ø—É–Ω–∫—Ç 1 –ø—Ä–æ–ø—É—Å–∫–∞–µ–º**.

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ virtual_pins (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ó–∞—Ö–æ–¥–∏–º –ø–æ SSH –Ω–∞ –ø—Ä–∏–Ω—Ç–µ—Ä –∏ –≤–ø–∏—Å—ã–≤–∞–µ–º:

```bash
cd /usr/share/klipper/klippy/extras
wget --no-check-certificate https://raw.githubusercontent.com/Tombraider2006/K1/main/random/virtual_pins.py
```

üí° **–ï—Å–ª–∏ —Å—Ç–∞–≤–∏–ª–∏ Helper Script –∏ –ø—É–Ω–∫—Ç 6 –≤ –Ω–µ–º** - —ç—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å, —è —É–∂–µ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–ª –¥–æ–±–∞–≤–∫—É virtual pins –≤ Helper Script.

### –®–∞–≥ 2: –ü—Ä–∞–≤–∫–∞ printer.cfg

–û—Ç–∫—Ä—ã–≤–∞–µ–º `printer.cfg` –Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ –≤–µ–±–ø–∞–Ω–µ–ª—å –∏ –≤–ø–∏—Å—ã–≤–∞–µ–º –≤ –ª—é–±–æ–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ:

```ini
[virtual_pins] # –µ—Å–ª–∏ —Ö–µ–ª–ø–µ—Ä —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ç–æ —ç—Ç—É —Å—Ç—Ä–æ–∫—É —Å—Ç–æ–∏—Ç –∑–∞–∫–æ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
[output_pin timer]
pin: virtual_pin:timer_pin
pwm: True
value: 0
scale: 1440


[delayed_gcode wait_timer] 
 # initial_duration: 2.
gcode:
    {% if printer['output_pin timer'].value > 0 %}
    {% set WAIT = printer['output_pin timer'].value * 1440|float %}
    {% set WAIT_ROUNDED = WAIT|int %}
    {% if WAIT - WAIT_ROUNDED >= 0.5 %}
    {% set WAIT_ROUNDED = WAIT_ROUNDED + 1 %}
    {% endif %}
      RESPOND MSG="Waiting... {WAIT_ROUNDED} minutes remaining."
      {% set WAIT_ROUND_COUNT = WAIT_ROUNDED - 1 %}
      SET_PIN PIN=timer VALUE={WAIT_ROUND_COUNT}
      UPDATE_DELAYED_GCODE ID=wait_timer DURATION=60
      WAIT_TIMER_START
    {% else %}
     RESPOND MSG="Wait Time End"
     WAIT_TIMER_END	
    {% endif %}
 

[gcode_macro WAIT_TIMER_START]
gcode:
  UPDATE_DELAYED_GCODE ID=wait_timer DURATION=1
  {% for s in range(0, 4) %}
  SET_PIN PIN=LED VALUE=0.25
  G4 P14000
  SET_PIN PIN=LED VALUE=0.5
  G4 P1000
  {% endfor %}

[gcode_macro WAIT_TIMER_END]
gcode:
  UPDATE_DELAYED_GCODE ID=wait_timer DURATION=0
  SET_PIN PIN=LED VALUE=1
```

–°–æ—Ö—Ä–∞–Ω—è–µ–º –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏.

### –®–∞–≥ 3: –ü—Ä–∞–≤–∫–∞ Start_Print.cfg

–í –ø–∞–ø–∫–µ `/Helper-Script/KAMP` –∏—â–µ–º —Ñ–∞–π–ª `Start_Print.cfg` –∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ `gcode:` –Ω–∞–∂–∏–º–∞–µ–º Enter –∏ –≤–ø–∏—Å—ã–≤–∞–µ–º:

```
WAIT_TIMER_START
```

–ü–æ–ª—É—á–∏—Ç—Å—è –∫–∞–∫-—Ç–æ —Ç–∞–∫:

![](timer_start.jpg)

–°–æ—Ö—Ä–∞–Ω—è–µ–º, –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ–º—Å—è.

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç:

![](element_timer.jpg)

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

1. –ü–µ—Ä–µ–¥ –ø–µ—á–∞—Ç—å—é –≤–≤–µ–¥–∏—Ç–µ –≤ –æ–∫–æ—à–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω—É—Ç (–≤–ø–ª–æ—Ç—å –¥–æ **1440** = 24 —á–∞—Å–∞)
2. –ü–µ—á–∞—Ç—å —Å—Ç–∞—Ä—Ç—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
3. –í—Å—ë —ç—Ç–æ –≤—Ä–µ–º—è –ø—Ä–∏–Ω—Ç–µ—Ä –±—É–¥–µ—Ç –∏–Ω–æ–≥–¥–∞ –≤–∞–º –ø–æ–º–æ—Ä–≥–∏–≤–∞—Ç—å —Å–≤–µ—Ç–æ–º –ø–æ–¥—Å–≤–µ—Ç–∫–∏ —Ä–∞–∑ –≤ 14 —Å–µ–∫—É–Ω–¥

üí° **–ü–æ–ª–µ–∑–Ω–æ –∑–Ω–∞—Ç—å:**
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–≤–∏–Ω–µ—Ç–µ –ø–æ–ª–∑—É–Ω–æ–∫ –Ω–∞ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - –≤ —Ç–µ—á–µ–Ω–∏–∏ –º–∏–Ω—É—Ç—ã –æ–±–Ω–æ–≤–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
- –ï—Å–ª–∏ —Å–∫–∏–Ω—É—Ç—å –Ω–∞ –Ω–æ–ª—å - —Ç–æ –ø–µ—á–∞—Ç—å –Ω–∞—á–Ω–µ—Ç—Å—è –∫–∞–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–π–¥–µ—Ç –º–∏–Ω—É—Ç–∞ –∏–ª–∏ –º–µ–Ω—å—à–µ

---

## ‚ö†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

–ï—Å–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–æ—è–≤–∏–ª–∞—Å—å –≤–æ—Ç —Ç–∞–∫–∞—è –æ—à–∏–±–∫–∞:

![](warn.jpg)

–í —Ñ–∞–π–ª–µ `printer.cfg` –¥–æ–±–∞–≤—å—Ç–µ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —Ä–∞–∑–¥–µ–ª:

```ini
[respond]
```

### P.P.S.

–ï—Å–ª–∏ –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª `/Helper-Script/KAMP/Start_Print.cfg` - —ç—Ç–æ –æ—Ç —Ç–æ–≥–æ —á—Ç–æ —ç—Ç–æ —É –≤–∞—Å –Ω–µ –ø–∞–ø–∫–∞, –∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–∞–ø–∫—É. 

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
1. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `/usr/data/KAMP-for-K1-Series/Configuration/Start_Print.cfg`
2. –ò–õ–ò –≤—Å—é –ø–∞–ø–∫—É –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –≤ `/usr/data/printer_data/config/Helper-Script/KAMP` —É–¥–∞–ª–∏–≤ —Å—Å—ã–ª–∫—É –Ω–∞ –ø–∞–ø–∫—É

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

[**Thank a lot for assistance in writing the macro - Guilouz**](https://github.com/Guilouz)

---

<div align="center">

**[‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é](../readme.md)**

</div>
