[‚Ü©Ô∏è –ù–∞–∑–∞–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é](../readme.md)

---

# üìå –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ virtual_pins

> –ü—Ä–∏–º–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–æ–≤ –≤ –∫–æ–Ω—Ü–µ –ø–µ—á–∞—Ç–∏

<h3 align="right"><a href="https://www.tinkoff.ru/rm/yakovleva.irina203/51ZSr71845" target="_blank">üíù –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∞–≤—Ç–æ—Ä–∞</a></h3>

---

## ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

–¢—É—Ç –ø–æ–ø—Ä–æ—Å–∏–ª–∏ –º–µ–Ω—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—É—é –∏–¥–µ—é –ø–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—é –≤–µ–Ω—Ç–∏–ª—è—Ç–æ—Ä–æ–≤ –≤ –∫–æ–Ω—Ü–µ –ø–µ—á–∞—Ç–∏. –ù—É —Ç–∞–∫-—Ç–æ –∏–¥–µ—è —Ç–∞–∫ —Å–µ–±–µ, –Ω–æ **—Ä–∞–∑ –∑–≤–µ–∑–¥—ã –∑–∞–∂–∏–≥–∞—é—Ç - –∑–Ω–∞—á–∏—Ç —ç—Ç–æ –∫–æ–º—É-—Ç–æ –Ω—É–∂–Ω–æ.** üåü

–ò—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –∫–∞–∫ –ø—Ä–∏–º–µ—Ä –Ω—É –∏ —Ç–µ–º –∫–æ–º—É —ç—Ç–æ –Ω–∞–¥–æ. *(–°–∞–º–∏ —Å–µ–±–µ –∑–ª–æ–±–Ω—ã–µ –ë—É—Ä–∞—Ç–∏–Ω–æ. –Ø –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏–ª.)* ü§∑

---

## üéØ –ó–∞–¥–∞—á–∞

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ —Å–ª–∞–π—Å–µ—Ä–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–ª–∞—Å—Ç–∏–∫–∞, —á—Ç–æ–±—ã –ø—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø–µ—á–∞—Ç–∏ –æ–Ω –Ω–µ –≤–∫–ª—é—á–∞–ª –æ–±–¥—É–≤ –∞ –ø—Ä–æ—Å—Ç–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞–ª –ø–µ—á–∞—Ç—å.

---

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –°–∞–º –º–∞–∫—Ä–æ—Å END_PRINT

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```ini
[gcode_macro END_PRINT]
gcode:
  Qmode_exit
  EXCLUDE_OBJECT_RESET
  PRINT_PREPARE_CLEAR
  M220 S100
  SET_VELOCITY_LIMIT ACCEL=5000 ACCEL_TO_DECEL=2500
  TURN_OFF_HEATERS
  M107 P1
  M107 P2
  END_PRINT_POINT
  WAIT_TEMP_START
  M84
```

–ß–∞—Å—Ç—å –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ —Å—Ç–∞—Ä—Ç —Ä–∞–±–æ—Ç—ã –∫—É–ª–µ—Ä–æ–≤ - —ç—Ç–æ `WAIT_TEMP_START`. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞–º–∏—Ç—å –µ–µ —É—Å–ª–æ–≤–∏—è–º–∏ –∏ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ–Ω–∏–º –º–æ–¥—É–ª—å **virtual_pins**.

‚ö†Ô∏è **–ï—Å–ª–∏ —É –≤–∞—Å –ø–æ –∫–∞–∫–∏–º-—Ç–æ –ø—Ä–∏—á–∏–Ω–∞–º –Ω–µ—Ç —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è** - —ç—Ç–æ –ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤ `/klippy/extras/` –¥–æ–±–∞–≤–∏—Ç—å [virtual_pins.py](virtual_pins.py) –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤ `printer.cfg` —Ä–∞–∑–¥–µ–ª `[virtual_pins]`

### –®–∞–≥ 1: –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ printer.cfg

‚ö†Ô∏è **–í–∞–∂–Ω–æ!** –ö–æ–¥ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—Å—Ç–∞–≤–∏—Ç—å **–ø–æ—Å–ª–µ** —Ä–∞–∑–¥–µ–ª–∞ `[virtual_pins]`

```ini
[output_pin FAN_END_STOP]
pin: virtual_pin:FAN_END_STOP_pin
value: 0
```

*–§–∞–Ω—Ç–∞–∑–∏–∏ —É –º–µ–Ω—è –Ω–µ—Ç, —Ç–∞–∫ —á—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤—ã–¥—É–º–∞–ª —Ç–∞–∫–æ–µ, –∫–∞–∫–æ–µ –ø—Ä–∏—à–ª–æ –≤ –≥–æ–ª–æ–≤—É.* üòÑ

–°–æ—Ö—Ä–∞–Ω—è–µ–º, –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ–º, —Å–º–æ—Ç—Ä–∏–º. –î–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è –∫–∞–∫-—Ç–æ —Ç–∞–∫:

![](fan_stop.png)

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω —É –Ω–∞—Å –±—É–¥–µ—Ç –≤—ã–∫–ª—é—á–µ–Ω.

### –®–∞–≥ 2: –û–±—Ä–∞–º–ª—è–µ–º –º–∞–∫—Ä–æ—Å —É—Å–ª–æ–≤–∏—è–º–∏

–¢–µ–ø–µ—Ä—å –∏–¥–µ–º –≤ `gcode_macro.cfg`, –Ω–∞—Ö–æ–¥–∏–º `END_PRINT` –∏ –æ–±—Ä–∞–º–ª—è–µ–º –º–∞–∫—Ä–æ—Å `WAIT_START` —É—Å–ª–æ–≤–∏—è–º–∏:

```ini
[gcode_macro END_PRINT]
gcode:
  Qmode_exit
  EXCLUDE_OBJECT_RESET
  PRINT_PREPARE_CLEAR
  M220 S100
  SET_VELOCITY_LIMIT ACCEL=5000 ACCEL_TO_DECEL=2500
  TURN_OFF_HEATERS
  M107 P1
  M107 P2
  END_PRINT_POINT
  {% if printer['output_pin FAN_END_STOP'].value == 0 %}
    WAIT_TEMP_START
  {% else %}
    SET_PIN PIN=FAN_END_STOP VALUE=0
  {% endif %}
  M84
```

### üí° –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –º—ã –Ω–∞–∑–Ω–∞—á–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞—à–µ–π –∫–Ω–æ–ø–∫–∏ **0** –∏ –ø—Ä–æ–≤–µ—Ä–∏–≤ —É—Å–ª–æ–≤–∏—è –∫–æ–≥–¥–∞ —É –Ω–∞—Å –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ 0 - –ø—Ä–∏–Ω—Ç–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∞–∫—Ä–æ—Å–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç `WAIT_START`. –ù–æ –µ—Å–ª–∏ –º—ã –ø–µ—Ä–µ–≤–µ–¥–µ–º –Ω–∞—à—É –∫–Ω–æ–ø–∫—É –≤ –∑–Ω–∞—á–µ–Ω–∏–µ **1** - –º—ã —ç—Ç—É —Å—Ç—Ä–æ–∫—É –ø–µ—Ä–µ–ø—Ä—ã–≥–Ω–µ–º. 

–ß—Ç–æ–±—ã –ø–æ—Å–ª–µ –ø–µ—á–∞—Ç–∏ –∫–Ω–æ–ø–∫–∞ –Ω–∞—à–∞ –≤–µ—Ä–Ω—É–ª–∞—Å—å –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∫–æ–Ω—Ü–µ –¥–æ–ø–∏—Å—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ 0.

---

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–ª–∞–π—Å–µ—Ä–µ

–¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ –º—ã –≤–∫–ª—é—á–∏–º –Ω–∞—à—É –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É - –≤ –∫–æ–Ω—Ü–µ –ø–µ—á–∞—Ç–∏ –∫—É–ª–µ—Ä –≥–æ–ª–æ–≤—ã –Ω–µ –±—É–¥–µ—Ç –¥—É—Ç—å –Ω–∞ –Ω–∞—à —Ö–æ—Ç–µ–Ω–¥. –ù–æ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã —ç—Ç–æ –≤–Ω–µ—Å—Ç–∏ –≤ —Å–ª–∞–π—Å–µ—Ä. **–î–∞ –ª–µ–≥–∫–æ!**

–í Orca Slicer –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –Ω—É–∂–Ω–æ–≥–æ –ø–ª–∞—Å—Ç–∏–∫–∞ –∏ –ª–µ–∑–µ–º –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ"** –∏ –≤–ø–∏—Å—ã–≤–∞–µ–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞—à–µ–π –∫–Ω–æ–ø–∫–∏.

üí° **–ö—Å—Ç–∞—Ç–∏**, —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –µ–µ –Ω–∞–∂–∞—Ç–∏—è –º–æ–∂–Ω–æ –≤—Å–µ–≥–¥–∞ –ø–æ–¥—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ Klipper.

–í–ø–∏—Å—ã–≤–∞–µ–º:

```gcode
SET_PIN PIN=FAN_END_STOP VALUE=1
```

–ü–æ–ª—É—á–∏—Ç—Å—è –∫–∞–∫-—Ç–æ —Ç–∞–∫:

![](set_pin.png)

**–í—Å—ë. –ì–æ—Ç–æ–≤–æ.** ‚úÖ

---

<div align="center">

**[‚Ü©Ô∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é](../readme.md)**

</div>
